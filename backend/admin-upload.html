<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Filmssy Admin Upload</title>
</head>

<body style="font-family: sans-serif; padding: 2rem;">

    <h2>üé¨ Admin Upload Panel</h2>

    <label>Firebase ID Token: </label><br />
    <input type="text" id="token" style="width: 400px;" placeholder="Paste Firebase ID token here" /><br /><br />

    <label>TMDB ID: </label><br />
    <input type="text" id="tmdbId" placeholder="e.g. 27205 for Inception" /><br /><br />

    <label>Type:</label><br />
    <select id="type">
        <option value="movie">Movie</option>
        <option value="series">Series</option>
    </select><br /><br />

    <label>Video File: </label><br />
    <input type="file" id="video" accept="video/*" /><br /><br />

    <label>Thumbnail Image: </label><br />
    <input type="file" id="thumbnail" accept="image/*" /><br /><br />

    <button onclick="upload()">üöÄ Upload</button>
    <p id="message"></p>

    <script>
        async function upload() {
            const token = document.getElementById('token').value.trim();
            const tmdbId = document.getElementById('tmdbId').value;
            const type = document.getElementById('type').value;
            const video = document.getElementById('video').files[0];
            const thumbnail = document.getElementById('thumbnail').files[0];

            if (!token || !tmdbId || !video || !thumbnail) {
                return alert("Please fill in all fields and upload files.");
            }

            const formData = new FormData();
            formData.append('tmdbId', tmdbId);
            formData.append('type', type);
            formData.append('video', video);
            formData.append('thumbnail', thumbnail);

            const res = await fetch("http://localhost:5000/api/admin/upload", {
                method: "POST",
                headers: {
                    Authorization: "Bearer " + token
                },
                body: formData
            });

            const data = await res.json();
            document.getElementById("message").innerText = res.ok
                ? "‚úÖ Upload successful: " + data.title
                : "‚ùå Error: " + (data.message || res.statusText);
        }
    </script>

</body>

</html>